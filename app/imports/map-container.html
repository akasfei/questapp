<link rel="import" href="../bower_components/google-map/google-map.html" >

<polymer-element name="map-container">
  <template>
    <style>
      google-map {
        display: block;
        position: absolute;
        top: 0px;
        left: 0px;
        width: 100%;
        height: 100%;
      }
      google-map /deep/ .gm-style-iw {
        color: #444;
        font-size: 12px;
        line-height: 14px;
      }
    </style>
    <google-map id="google-map" class="background-map" apiKey="AIzaSyAKe0Oc1ulYsaGpYoLZHWcs8dCjv9xeP_Q" latitude="{{latitude}}" longitude="{{longitude}}" zoom="15" disableDefaultUI>
      <template repeat="{{m in markers}}">
        <google-map-marker latitude="{{m.latitude}}" longitude="{{m.longitude}}"></google-map-marker>
      </template>
    </google-map>
  </template>
  <script>
  Polymer('map-container', {
    ready: function () {
      var self = this;
      this.markers = [];
      if (window.navigator.geolocation) {
        window.navigator.geolocation.getCurrentPosition(function (position) {
          self.latitude = position.coords.latitude;
          self.longitude = position.coords.longitude;
          self.current = {
            latitude: self.latitude,
            longitude: self.longitude
          };
          self.markers.push(self.current);
        }, function (err) {
          console.error(err);
        });
      }
    }
  });
  </script>
</polymer-element>
